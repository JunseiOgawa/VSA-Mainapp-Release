# ギャラリー操作ガイド

ギャラリー画面では、インポートした写真を一覧表示し、詳細情報の確認やお気に入り登録などの操作ができます。

## 表示モード

ギャラリーには2つの表示モードがあります。

### グリッド表示

写真をサムネイルのグリッド形式で表示します。

- 画像を視覚的に確認しやすい
- サムネイルサイズの調整が可能（50px〜300px）
- 日付ごとにグループ化表示（サムネイルサイズが小さい場合）

### テーブル表示

写真をリスト形式で表示します。

- ファイル名、撮影日時、ワールド名などの情報を一覧で確認
- 列ヘッダーをクリックしてソート
- 列幅のリサイズが可能

表示モードはツールバーのボタンで切り替えられます。

## ソート機能

以下の項目でソートできます。

| ソート項目 | 説明 |
|-----------|------|
| 作成日 | ファイルの作成日時（デフォルト） |
| ワールド名 | VRChatのワールド名 |
| ファイル名 | ファイル名のアルファベット順 |
| ファイルサイズ | ファイルサイズの大小 |
| 撮影日時 | 写真の撮影日時 |
| 撮影者 | 撮影したユーザー名 |

ソートの操作方法:

1. ツールバーのソートドロップダウンから項目を選択
2. 矢印ボタンで昇順/降順を切り替え
3. テーブル表示時は列ヘッダーをクリックしてもソート可能

## ズーム操作

グリッド表示でサムネイルサイズを変更できます。

### キーボードショートカット

| 操作 | ショートカット |
|------|----------------|
| ズームイン | `Ctrl` + `=` |
| ズームアウト | `Ctrl` + `-` |

### マウス操作

- `Ctrl` + マウスホイール: マウス位置を中心にズーム

### スライダー

ツールバーのスライダーでもサイズを調整できます。

## 画像詳細サイドバー

写真をクリックすると、右側にサイドバーが表示され、詳細情報を確認できます。

### 表示される情報

**基本情報:**
- プレビュー画像（クリックでデフォルトアプリで開く）
- ファイルパス
- ファイルハッシュ

**VRChat情報:**
- ワールド名（コピー可能）
- 撮影者名
- 撮影日時
- インスタンス内のユーザー一覧

**カメラ情報:**
- 使用カメラの種類（VirtualLens2/Integral/通常カメラ）
- VirtualLens2パラメータ（Aperture、FocalLength、Exposureなど）
- Integralパラメータ（ShutterSpeed、BokehShapeなど）

カメラ情報はアコーディオン形式で折りたたまれています。

### 画像詳細サイドバーのボタン

詳細サイドバーの上部には、以下のボタンが配置されています：

#### QRコード読み取りボタン

詳細サイドバーのプレビュー画像の上に「QRコードを読む」ボタンが表示されます。

**機能**:
- 画像内のQRコードを自動検出
- 複数のQRコードに対応（画像内に複数あっても全て検出）
- 検出したQRコードを画像上にオーバーレイ表示

**使い方**:
1. 写真をクリックして詳細サイドバーを開く
2. 「QRコードを読む」ボタンをクリック
3. QRコードが自動検出されます
4. 検出されたQRコード上にボックスが表示されます

**検出結果の処理**:
- **URL**: 「ブラウザで開く」ボタンをクリックしてブラウザで開く
- **テキスト**: 「クリップボードにコピー」をクリックして内容をコピー
- 複数コード検出時は、全てのコードが表示されます

#### X投稿ボタン

詳細サイドバーに「X に投稿」ボタンが表示されます（写真ごとに）。

**機能**:
- 選択した写真をX投稿モーダルで開く
- 複数写真の同時投稿に対応（最大4枚）

**使い方**:
1. 写真をクリックして詳細サイドバーを開く
2. 「X に投稿」ボタンをクリック
3. X投稿モーダルが表示されます
4. テキストやプリセットを設定して投稿

詳細は[X投稿機能ガイド](x-post-guide.md)を参照してください。

## お気に入り機能

写真にお気に入りマークを付けることができます。

### 操作方法

- サムネイルの星アイコンをクリック
- 詳細サイドバーの星ボタンをクリック
- テーブル表示の星アイコンをクリック

お気に入り状態はデータベースに保存され、アプリを再起動しても維持されます。

## 画像の削除

不要な画像をゴミ箱に移動できます。

1. 画像をクリックして詳細サイドバーを開く
2. ゴミ箱アイコンをクリック
3. 確認ダイアログで「削除」を選択

削除された画像はシステムのゴミ箱に移動されます（完全削除ではありません）。

## キーボードショートカット一覧

| 操作 | ショートカット |
|------|----------------|
| ズームイン | `Ctrl` + `=` |
| ズームアウト | `Ctrl` + `-` |
| フルスクリーン | `F11` |

## ツールバーの操作

ツールバーは画面上部に表示されます。

- マウスを画面上部（100px以内）に移動すると表示
- 展開/折りたたみボタンで固定表示
- リロードボタンで画像一覧を再読み込み

## ユーザー検索

詳細サイドバーに表示されるユーザー一覧から、特定のユーザーが写っている写真を検索できます。

### ユーザー名をクリックして検索

**手順**:
1. 写真をクリックして詳細サイドバーを表示
2. 「インスタンス内のユーザー一覧」セクションからユーザー名をクリック
3. 自動的にユーザー検索画面に遷移
4. そのユーザーが写っている写真が一覧表示される

### 複数ユーザーでのAND検索

複数のユーザーを同時に検索して、全員が写っている写真のみを表示できます。

詳細は[ユーザー検索機能ガイド](person-search-guide.md)を参照してください。

## 一括選択機能

複数の写真を同時に選択して、一括でお気に入り登録やゴミ箱移動などの操作が可能です。

### 選択モードの開始

**手順**:
1. ギャラリータブを開く
2. ツールバーの「選択モード」ボタンをクリック
3. 一括選択モードが有効になります
4. ツールバーの表示が変更され、選択操作用のボタンが表示されます

### 写真の選択と解除

**選択方法**:
- グリッド表示: サムネイルをクリックして選択
- テーブル表示: 行をクリックして選択
- 既に選択された写真をクリックすると選択が解除されます

**一括選択**:
1. ツールバーの「すべて選択」ボタンをクリック
2. 画面に表示されている全ての写真が選択されます

**選択解除**:
1. ツールバーの「選択解除」ボタンをクリック
2. すべての選択がクリアされます

### 選択状態の表示

選択中の写真には以下の表示がされます：

- グリッド表示: サムネイル上にチェックマーク表示
- テーブル表示: 行が強調表示、左側にチェックボックス表示
- ツールバーに「n 個選択」と表示

### 一括操作

複数写真を選択した状態で、以下の操作が可能です：

#### 一括お気に入り登録

**手順**:
1. 複数の写真を選択
2. ツールバーの「お気に入りに追加」ボタンをクリック
3. 選択した全ての写真がお気に入りに登録されます

#### 一括ゴミ箱移動

**手順**:
1. 複数の写真を選択
2. ツールバーの「ゴミ箱に移動」ボタンをクリック
3. 確認ダイアログで「移動」をクリック
4. 選択した全ての写真がゴミ箱に移動されます

### X投稿モード（写真選択）

特別な選択モードで、X投稿用に最大4枚の写真を選択できます。

**開始方法**:
1. ツールバーの「X投稿モード」ボタンをクリック
2. 特別な選択モードが有効になります

**選択**:
1. X投稿したい写真をクリック（最大4枚）
2. 4枚に達すると、それ以上選択できなくなります
3. 既に選択された写真をクリックすると選択が解除されます

**投稿**:
1. 「X に投稿」ボタンをクリック
2. X投稿モーダルが表示されます
3. テキストやプリセットを設定して投稿

詳細は[X投稿機能ガイド](x-post-guide.md)を参照してください。

### 選択モードの終了

**手順**:
1. ツールバーの「選択モード終了」ボタンをクリック
2. または「キャンセル」ボタンをクリック
3. 選択モードが終了し、全ての選択がクリアされます

## ゴミ箱タブ

ゴミ箱タブでは、削除した写真を確認したり復元したり、完全削除できます。

### ゴミ箱タブへのアクセス

**手順**:
1. ギャラリータブの上部にあるタブメニューを確認
2. 「ギャラリー」「お気に入り」「ゴミ箱」の3つのタブが表示されます
3. 「ゴミ箱」をクリック

### ゴミ箱ビューの機能

ゴミ箱ビューは通常のギャラリーと同じ表示形式（グリッド/テーブル）に対応しています。

**削除された写真一覧**:
- ゴミ箱に移動された全ての写真が表示されます
- ファイル名、削除日時、元のワールド名などが確認できます
- グリッド表示またはテーブル表示を切り替え可能

### 復元機能

削除した写真をギャラリーに復元できます。

**手順**:
1. ゴミ箱タブを開く
2. 復元したい写真をクリック
3. 詳細サイドバーの「復元」ボタンをクリック
4. 確認ダイアログで「復元」をクリック
5. 写真がギャラリーに戻ります

**一括復元**:
1. 複数の写真を選択
2. ツールバーの「復元」ボタンをクリック
3. 選択した全ての写真が復元されます

### 完全削除機能

写真をシステムのゴミ箱に移動し、VSAから完全に削除できます。

**手順**:
1. ゴミ箱タブから削除したい写真をクリック
2. 詳細サイドバーの「完全削除」ボタンをクリック
3. 確認ダイアログで「完全削除」をクリック
4. 写真がシステムのゴミ箱に移動されます

**一括完全削除**:
1. 複数の写真を選択
2. ツールバーの「完全削除」ボタンをクリック
3. 確認ダイアログで「削除」をクリック
4. 選択した全ての写真が完全削除されます

### 注意事項

**復元期間**:
- ゴミ箱に保存される期間に制限はありません
- 手動で復元または完全削除されるまで保持されます

**完全削除について**:
- システムのゴミ箱に移動されるため、Windowsのゴミ箱から復元可能な場合があります
- ただし、Windowsのゴミ箱が空になると、復元は不可能になります
- 重要な写真は事前にバックアップを取ることをお勧めします

**ゴミ箱のクリア**:
- 「ゴミ箱を空にする」ボタンで全ての写真を完全削除できます
- この操作は取り消せません

## パフォーマンスについて

大量の画像を扱う場合でも、仮想化技術により快適に動作します。

- 画面に表示される画像のみをレンダリング
- サムネイルの遅延読み込み
- ページキャッシュによる高速な再表示

## Google Drive連携

お気に入りに登録した写真をGoogle Driveに自動アップロードできます。

詳細は[お気に入い機能ガイド](favorites-guide.md)を参照してください。

## 現在の制限事項

以下の機能は現在開発中です。

- フィルター機能（日付、ワールド、ユーザーなどでの絞り込み）
- キーワード検索機能

これらの機能は今後のアップデートで追加予定です。
