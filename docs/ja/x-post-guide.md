# X投稿機能ガイド

X投稿機能を使用すると、VSAで編集した写真をX（旧Twitter）に投稿できます。複数枚の写真を選択し、カメラ情報フレームを付けた状態で投稿することが可能です。

## X投稿機能の概要

X投稿機能は、以下の特徴があります：

- **複数枚投稿対応**: 最大4枚の写真を同時に選択して投稿
- **カメラ情報フレーム**: 写真にカメラ情報を重ねたフレームを自動生成
- **プリセット管理**: よく使う投稿設定を保存・再利用
- **テンプレート設定**: デフォルトテキストとハッシュタグを指定

## X投稿機能の使い方

### 投稿前の準備

X投稿機能を使用するには、事前にX（Twitter）のアカウント認証が必要です。

**初回認証の手順**:
1. 設定画面を開く
2. 「X投稿」パネルを開く
3. 「X アカウント認証」セクションから認証ボタンをクリック
4. ブラウザが開き、X（Twitter）の認証ページが表示されます
5. 「連携を認可」をクリック
6. 認証が完了すると、VSAに戻ります

### 写真の選択

#### ギャラリーからの選択

**手順**:
1. ギャラリータブを開く
2. ツールバーの「X投稿モード」ボタンをクリック
3. X投稿用の選択モードに入る
4. 投稿したい写真をクリックして選択（最大4枚まで）
5. 選択数は画面に表示されます

**注意事項**:
- X投稿では最大4枚までの写真を同時に投稿できます
- 4枚を超える選択はできません
- 既に選択された写真をクリックすると、選択が解除されます

#### お気に入りからの選択

**手順**:
1. お気に入りタブを開く
2. ツールバーの「X投稿モード」ボタンをクリック
3. 投稿したい写真をクリックして選択（最大4枚まで）
4. 選択完了後、「X投稿」ボタンをクリック

### 選択モードの終了

**手順**:
1. ツールバーの「X投稿モード」ボタンをもう一度クリック
2. または、「キャンセル」ボタンをクリック
3. 選択がクリアされます

## カメラ情報フレーム機能

### カメラ情報フレームとは

カメラ情報フレーム機能により、写真にカメラ情報（カメラの種類、パラメータなど）を視覚的に表示するフレームを自動生成できます。

**v0.4.3以降の対応**:
- 複数枚のカメラ情報フレームを同時生成
- X投稿時に自動的にフレームが適用

### フレームのカスタマイズ

**フレーム設定オプション**:

| オプション | 説明 | デフォルト |
|-----------|------|----------|
| フレーム有効 | フレーム生成のオン/オフ | ON |
| フレーム位置 | フレームの配置位置（上、下、左、右） | 下 |
| フレーム背景色 | フレーム背景の色 | 黒 |
| テキスト色 | カメラ情報テキストの色 | 白 |
| フレーム幅 | フレームの厚さ（ピクセル） | 50 |

**フレーム設定の変更手順**:
1. 写真選択後、「フレーム設定」をクリック
2. 各項目を調整
3. プレビューで確認
4. 「適用」をクリック

### 比率指定機能

写真の縦横比を指定して、投稿に最適なサイズにカスタマイズできます。

**対応比率**:
- 1:1（正方形、SNS標準）
- 16:9（ワイド）
- 9:16（縦長）
- 4:3（標準）
- 3:4（縦長標準）

**比率指定の手順**:
1. 「比率設定」セクションから目的の比率を選択
2. フレーム位置が自動調整されます
3. プレビューで確認

## プリセット管理

### プリセットとは

よく使う投稿設定（フレーム設定、テキストテンプレート、ハッシュタグなど）をプリセットとして保存できます。

### プリセットの作成

**手順**:
1. 設定画面を開く
2. 「X投稿」パネルを開く
3. 「プリセット」セクションで「新規プリセット」をクリック
4. プリセット名を入力
5. フレーム設定などをカスタマイズ
6. 「保存」をクリック

### プリセットの編集

**手順**:
1. 設定画面の「X投稿」パネルを開く
2. プリセットリストから編集したいプリセットをクリック
3. 各項目を変更
4. 「保存」をクリック

### プリセットの削除

**手順**:
1. 設定画面の「X投稿」パネルを開く
2. プリセットリストから削除したいプリセットの右側「削除」ボタンをクリック
3. 確認ダイアログで「削除」をクリック

### プリセットの適用

X投稿モーダルを開く際、ドロップダウンから適用するプリセットを選択できます。

**手順**:
1. 写真を選択してX投稿モーダルを開く
2. 「プリセット」ドロップダウンから選択
3. フレーム設定とテキストテンプレートが自動適用される

## テンプレート設定

### テキストテンプレート

X投稿時のデフォルトテキストをあらかじめ設定できます。

**テンプレート変数**:

| 変数 | 説明 |
|------|------|
| `{world}` | ワールド名 |
| `{date}` | 撮影日時 |
| `{camera}` | 使用カメラ |
| `{user}` | 撮影者名 |

**例**:
```
VRChatで撮影した写真です。
ワールド: {world}
日時: {date}
カメラ: {camera}
```

### テンプレートの設定

**手順**:
1. 設定画面を開く
2. 「X投稿」パネルを開く
3. 「テキストテンプレート」セクションでテンプレートを編集
4. 「保存」をクリック

### ハッシュタグ設定

よく使うハッシュタグをあらかじめ登録できます。

**手順**:
1. 設定画面の「X投稿」パネルを開く
2. 「ハッシュタグ」セクションで「追加」をクリック
3. ハッシュタグを入力
4. 「保存」をクリック

**ハッシュタグの利用**:
- 投稿時、登録したハッシュタグが候補として表示されます
- ワンクリックで追加できます

## 投稿手順（ステップバイステップ）

### 基本的な投稿フロー

**ステップ1: 写真選択**
1. ギャラリーまたはお気に入りタブを開く
2. 「X投稿モード」ボタンをクリック
3. 投稿したい写真を選択（最大4枚）

**ステップ2: X投稿モーダルを開く**
1. 「X投稿」ボタンをクリック
2. X投稿モーダルが表示されます

**ステップ3: 設定確認**
1. プリセット（フレーム設定）を選択
2. フレーム設定を必要に応じてカスタマイズ
3. カメラ情報フレームが必要な場合は有効化
4. プレビューで確認

**ステップ4: テキスト入力**
1. 投稿テキストを入力
2. 必要に応じてハッシュタグを追加
3. テンプレートから変数を挿入

**ステップ5: 投稿実行**
1. 「投稿」ボタンをクリック
2. X（Twitter）への投稿が実行されます
3. 投稿成功のメッセージが表示されます

### 高度な設定での投稿

**複数プリセットの組み合わせ**:
1. ステップ3でプリセットを選択
2. 必要に応じて個別に設定を変更
3. プレビューで確認してから投稿

**カスタムフレーム設定**:
1. 「フレーム設定」セクションで個別にカスタマイズ
2. 「新規プリセット保存」をクリックして今後の再利用に備える

## トラブルシューティング

### X認証に失敗する場合

**症状**: X アカウント認証でエラーが表示される

**解決方法**:
1. インターネット接続を確認
   - ファイアウォール設定を確認
   - プロキシが設定されていないか確認
2. ブラウザキャッシュをクリア
   - ChromeまたはFirefoxのキャッシュをクリア
3. 認証を再度試行
   - 設定画面から「再認証」をクリック
4. アプリを再起動
   - 完全に終了して再起動

### 投稿が失敗する場合

**症状**: 「投稿に失敗しました」というエラーが表示される

**解決方法**:
1. X認証を確認
   - アカウント認証が有効か確認
   - 認証トークンが有効期限内か確認
2. テキスト内容を確認
   - テキストの長さが制限を超えていないか確認（280文字以内）
   - 禁止文字が含まれていないか確認
3. 写真サイズを確認
   - X（Twitter）の制限に対応しているか確認
   - 推奨: 1200x675px以上、JPEGまたはPNG形式
4. ネットワーク接続を確認
   - インターネット接続の安定性を確認
   - 他のアプリでのインターネット接続をテスト

### フレームが正しく生成されない場合

**症状**: カメラ情報フレームが表示されない

**解決方法**:
1. フレーム有効化を確認
   - 「フレーム有効」のチェックボックスがオンか確認
2. フレーム設定を確認
   - フレーム位置や背景色の設定を確認
   - プレビューが正しく表示されるか確認
3. 写真情報を確認
   - 写真のメタデータが完全か確認
   - カメラ情報が正しく記録されているか確認

### テンプレート変数が展開されない場合

**症状**: `{world}` などの変数がそのまま投稿される

**解決方法**:
1. 写真のメタデータを確認
   - 写真の詳細情報にワールド名などが記録されているか確認
2. テンプレート形式を確認
   - 変数が正しい形式 `{変数名}` になっているか確認
3. 手動入力への切り替え
   - テンプレート変数の代わりに手動でテキストを入力

## 関連ドキュメント

- [ギャラリー操作ガイド](gallery-guide.md) - 写真選択とギャラリー操作
- [設定ガイド](settings-guide.md) - X投稿設定パネルの詳細
- [VRChat連携](vrchat-integration.md) - VRChat連携とメタデータ取得
