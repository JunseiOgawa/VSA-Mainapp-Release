# お気に入り機能ガイド

お気に入り機能を使うことで、大切な写真を効率的に管理し、Google Driveに自動アップロードできます。このガイドでは、お気に入り機能の全機能について詳しく説明します。

## 概要

お気に入り機能では以下のことができます：

- **写真をマーク**: お気に入りの写真に星マークを付ける
- **一元表示**: すべてのお気に入り写真を専用ビューに表示
- **Google Drive連携**: お気に入り写真を自動的にクラウドにバックアップ
- **効率的な管理**: 重要な写真を素早くアクセス

## お気に入りの追加方法

### 方法1: ギャラリービューから

ギャラリーのサムネイルに表示される星アイコンをクリックします。

**手順**:
1. ギャラリーを表示
2. 写真のサムネイル右上にある★アイコンを探す
3. ★アイコンをクリック
4. 星が塗りつぶされて「お気に入り登録」完了

### 方法2: 詳細サイドバーから

写真をクリックして表示される詳細情報パネルのボタンをクリックします。

**手順**:
1. ギャラリーから写真をクリック
2. 右側に詳細サイドバーが表示される
3. サイドバーの上部にある★ボタンをクリック
4. 星が塗りつぶされてお気に入り登録完了

### 方法3: テーブル表示から

テーブル表示での各行の★列をクリックします。

**手順**:
1. テーブル表示に切り替え
2. 対象行の★列をクリック
3. お気に入り登録完了

**ヒント**: グリッド表示とテーブル表示の両方で同じお気に入り状態が同期されます。

## お気に入りビューの使い方

### アクセス方法

サイドバーの「お気に入り」をクリックして、専用ビューを開きます。

### 表示方法

お気に入りビューには、登録したすべての写真がグリッド形式で表示されます。

**表示される情報**:
- サムネイル画像
- 写真メタデータ（ホバー時に表示）
- 撮影日時
- ワールド名

### ソート機能

お気に入りビューでは以下の順序でソートできます：

- **追加日時順**: 新しく登録した順
- **撮影日時順**: 撮影された時間順
- **ファイルサイズ順**: ファイルサイズの大小順

### 選択機能

複数の写真を選択して一括操作できます。

**選択方法**:
1. 写真をクリック（Ctrl+クリックで複数選択）
2. または、チェックボックスにチェック

**一括操作**:
- **Google Driveにアップロード**: 選択した写真を手動でアップロード
- **お気に入りから削除**: 複数の写真を一度に削除

### 削除機能

お気に入りから写真を削除します。

**手順**:
1. 削除対象の写真をクリック
2. 詳細サイドバーで★ボタンをクリック（再度）
3. または、詳細サイドバーの「お気に入りから削除」ボタンをクリック

**重要**: お気に入りから削除しても、写真ファイル自体は削除されません。ギャラリーには引き続き表示されます。

## Google Drive連携

Google Driveと連携することで、お気に入り写真を自動的にクラウドにバックアップできます。

### ログイン方法（OAuth2認証フロー）

**ステップ1: アカウント画面を開く**
1. サイドバーの「アカウント」をクリック
2. アカウント管理画面が表示される

**ステップ2: Google Driveでログイン**
1. 「Google Driveでログイン」ボタンをクリック
2. Webブラウザが自動的に開く
3. Googleアカウントを選択（複数ある場合）

**ステップ3: アクセス権限を承認**
1. VSAがGoogle Driveにアクセスする権限を確認
2. 「許可」または「認証」をクリック
3. ブラウザから自動的にVSAアプリに戻る

**ステップ4: 確認**
1. アカウント画面で「ログイン中」と表示される
2. Google Driveのログイン完了

### 自動アップロード設定

お気に入りに追加した写真を、自動的にGoogle Driveにアップロードする機能です。

**有効化方法**:
1. アカウント設定を開く
2. 「自動アップロード」トグルをオン
3. 設定が保存される

**動作**:
- お気に入りに追加 → 自動的にGoogle Driveへアップロード
- 数秒～数十秒でアップロード完了
- ネットワーク接続が必要

**アップロード先**:
- Google Drive内の「VSA」フォルダ
- フォルダが自動作成されます

### 手動アップロード

すぐにアップロードしたい場合、または自動アップロードが無効の場合は手動実行できます。

**手順**:
1. アカウント設定を開く
2. 「今すぐアップロード」ボタンをクリック
3. お気に入り写真がGoogle Driveにアップロード開始
4. 進捗バーでアップロード状況を確認

**所要時間**: 写真数とファイルサイズに依存（通常は数分～数十分）

### アップロード進捗の確認

アップロード中は以下の情報が表示されます：

- **進捗率**: 0～100%で表示
- **処理済みファイル数**: 「3 / 10」のように表示
- **現在処理中のファイル**: ファイル名またはサムネイル

### エラー時の対処法

#### アップロード失敗エラー

**症状**: 「アップロードに失敗しました」というエラーメッセージ

**原因と対策**:

**ネットワーク接続がない**
- インターネット接続を確認
- Wi-Fiが接続されているか確認
- ルーターを再起動してみる

**Google Driveのストレージが満杯**
- Google Drive設定でストレージ使用量を確認
- 不要なファイルを削除
- 有料プランへのアップグレードを検討

**認証が失効している**
- 「再度ログイン」ボタンをクリック
- Google Driveで再度ログイン

#### 認証エラー

**症状**: 「認証に失敗しました」というエラー

**原因と対策**:

**ブラウザのポップアップがブロックされている**
- ブラウザの設定でVSAのポップアップを許可
- 別のブラウザで試してみる

**セキュリティソフトがブロック**
- ファイアウォール設定を確認
- セキュリティソフトの例外にVSAを追加

**Googleアカウントのセキュリティ設定**
- Google アカウント設定を開く
- 「セキュリティ」から「安全性の低いアプリへのアクセス」を確認

## データ管理

### お気に入りデータベース

お気に入り情報はローカルのSQLiteデータベースに保存されます。

**保存場所**:
```
%APPDATA%/VSA/favorites.db
```

**特性**:
- ローカルに保存（プライベート）
- アプリ再起動後も保持
- VSAをアンインストール時に削除される

### バックアップの作成

重要なお気に入り情報をバックアップできます。

**手順**:
1. VSAを終了
2. 以下のファイルをコピー:
   ```
   %APPDATA%/VSA/favorites.db
   ```
3. 安全な場所に保存

**復元方法**:
1. バックアップファイルを上記の場所にコピー
2. VSAを再起動

### データのエクスポート（将来機能）

将来のバージョンでは、お気に入り情報をJSONやCSVにエクスポートできる予定です。

## トラブルシューティング

### お気に入りが保存されない

**症状**: お気に入りに追加しても、再起動後に削除されている

**考えられる原因**:
- ディスク容量不足
- ファイルアクセス権限の問題
- データベースの破損

**解決方法**:

**ステップ1: ディスク容量を確認**
- Windowsの設定からディスク容量を確認
- 1GB以上の空き容量があるか確認

**ステップ2: アプリを再起動**
- VSAを完全に終了（タスクマネージャーで確認）
- 数秒待機
- VSAを再起動

**ステップ3: ファイルアクセス権限を確認**
- `%APPDATA%/VSA/`フォルダの書き込み権限を確認
- フォルダを右クリック > プロパティで確認

**ステップ4: データベースを再構築**
1. 開発者モードを有効化
2. 開発者メニューからデータベースを再構築
3. アプリを再起動

### Google Driveアップロードが失敗する

**症状**: アップロード中にエラーが発生し、途中で停止

**解決方法**:

**ステップ1: ネットワーク接続を確認**
- ブラウザでGoogle Driveにアクセス可能か確認
- Wi-Fi接続を確認

**ステップ2: ストレージ使用量を確認**
1. Google Driveをブラウザで開く
2. ストレージ使用量を確認
3. 満杯の場合は不要なファイルを削除

**ステップ3: 再度ログイン**
1. アカウント設定を開く
2. 「ログアウト」をクリック
3. 「Google Driveでログイン」で再度ログイン
4. 手動アップロードを実行

**ステップ4: 小分けにしてアップロード**
- 大量のファイルの場合、一度に処理するとタイムアウトする可能性
- 複数回に分けてアップロード

### 認証エラーの対処法

**症状**: ログイン時に認証ウィンドウが表示されない、またはエラー表示

**解決方法**:

**ステップ1: ブラウザのキャッシュをクリア**
1. ブラウザを開く
2. Ctrl + Shift + Delete（または設定 > 閲覧履歴）
3. 「キャッシュされた画像とファイル」をチェック
4. 「閲覧履歴を削除」をクリック

**ステップ2: 別のブラウザで試す**
- Edge、Firefox、Chromeなど異なるブラウザで試す
- Chromeの利用を推奨

**ステップ3: VSAの再起動**
- VSAを完全に終了
- 数秒待機
- VSAを再起動してログインを再度試す

**ステップ4: ファイアウォール設定を確認**
- Windowsセキュリティセンターを開く
- 「ファイアウォールと保護」を確認
- VSAが許可リストに含まれているか確認

## ヒント

- **定期的なバックアップ**: 重要なお気に入り情報は定期的にバックアップ
- **Google Drive共有**: Google Driveフォルダを他のデバイスやユーザーと共有可能
- **オフライン時の操作**: インターネット接続がなくても、ローカルでのお気に入り追加は可能（アップロードは後で実行）

## 関連情報

- [アカウント管理ガイド](account-guide.md) - Google Drive認証の詳細
- [ギャラリー操作ガイド](gallery-guide.md) - ギャラリー機能の詳細
- [トラブルシューティング詳細ガイド](troubleshooting.md) - より詳しい問題解決方法
